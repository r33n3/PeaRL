# PeaRL Governance Policy — {{ project_id }}

> Full governance reference for autonomous coding agents.
> Environment: **{{ environment }}** | Autonomy: **{{ autonomy_mode }}**
> Auto-generated by `pearl-dev`. Do not edit manually — use `pearl-dev sync` to refresh.

---

## 1. Policy Enforcement

This project uses PeaRL (Policy-enforced Autonomous Risk Layer) for Responsible AI governance.
**Always call `pearl_check_action` before performing risky operations.**
**Always call `pearl_check_diff` before committing code.**

---

## 2. Allowed Actions
{% for action in allowed_actions %}
- `{{ action }}`
{% endfor %}

## 3. Blocked Actions (DO NOT PERFORM)
{% for action in blocked_actions %}
- `{{ action }}`
{% endfor %}

{% if approval_required_for %}
## 4. Actions Requiring Approval

Call `pearl_request_approval` and wait for developer approval before:
{% for action in approval_required_for %}
- `{{ action }}`
{% endfor %}
{% endif %}

## 5. Prohibited Patterns

Do NOT introduce these patterns in code:
{% for pattern in prohibited_patterns %}
- `{{ pattern }}`
{% endfor %}

## 6. Required Tests

Before marking any task complete, ensure these tests pass:
{% for test in required_tests %}
- `{{ test }}`
{% endfor %}

{% if approval_checkpoints %}
## 7. Approval Checkpoints
{% for cp in approval_checkpoints %}
- **{{ cp.trigger }}**: requires roles {{ cp.required_roles }}
{% endfor %}
{% endif %}

{% if promotion %}
---

## 8. Promotion Readiness: {{ promotion.current_env }} → {{ promotion.next_env }}

| Status | {{ promotion.passed }}/{{ promotion.total }} rules passing ({{ promotion.progress_pct }}%) |
|--------|{% for _ in range(40) %}-{% endfor %}|

{% if promotion.blocking_rules %}
### Blocking Rules
{% for rule in promotion.blocking_rules %}
- **{{ rule.rule_type }}** — {{ rule.message }}
{% endfor %}
{% endif %}

{% if promotion.passing_rules %}
### Passing Rules
{% for rule in promotion.passing_rules %}
- `{{ rule.rule_type }}` — {{ rule.message }}
{% endfor %}
{% endif %}

{% if promotion.next_steps %}
### Next Steps to Unblock Promotion
{% for step in promotion.next_steps %}
{{ loop.index }}. {{ step }}
{% endfor %}
{% endif %}
{% endif %}

{% if fairness_requirements %}
---

## 9. Fairness Requirements (AI-Enabled Project)
{% for req in fairness_requirements %}
- **{{ req.statement }}** — {{ req.status | default("pending") }} | gate: {{ req.gate_mode | default("warn") }}
{% endfor %}
{% endif %}

{% if scan_targets %}
---

## 10. Registered Scan Targets

| Target | Tool | Branch | Frequency | Last Scan | Status |
|--------|------|--------|-----------|-----------|--------|
{% for st in scan_targets %}
| `{{ st.repo_url }}` | {{ st.tool_type }} | {{ st.branch }} | {{ st.scan_frequency }} | {{ st.last_scanned_at or "never" }} | {{ st.last_scan_status or "pending" }} |
{% endfor %}
{% endif %}

---

## MCP Tools Reference

### pearl-dev (local policy enforcement)

| Tool | Purpose |
|------|---------|
| `pearl_check_action` | Check if an action is allowed before performing it |
| `pearl_check_diff` | Scan diffs for prohibited patterns before committing |
| `pearl_get_task_context` | Get task-scoped policy at the start of a new task |
| `pearl_request_approval` | Request approval for restricted actions |
| `pearl_report_evidence` | Log test results or other evidence |
| `pearl_get_policy_summary` | View the full policy summary |
| `pearl_check_promotion` | Check promotion readiness from cached evaluation |
| `pearl_register_repo` | Register current repo as a scan target |

### pearl-api (PeaRL API server)

| Tool | Purpose |
|------|---------|
| `evaluatePromotionReadiness` | Evaluate if project is ready for next environment |
| `requestPromotion` | Request promotion when all gates pass |
| `getProjectSummary` | Get markdown summary of project governance posture |
| `createFairnessCase` | Define fairness case for AI-enabled project |
| `submitEvidence` | Submit evidence package for gate evaluation |
| `ingestMonitoringSignal` | Ingest runtime fairness monitoring signal |
| `registerScanTarget` | Register a repo as a scan target for a tool |
| `listScanTargets` | List scan targets for a project |
| `updateScanTarget` | Update scan target configuration |
